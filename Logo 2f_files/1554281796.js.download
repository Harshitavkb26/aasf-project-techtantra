var Evisua=(function($){'use strict';var handleJsonResponse,handleHtmlResponse;handleJsonResponse=function(json,status,XMLObject,handler){if(handler){handler.apply(this,[((json.success==='true'||json.success===true)),json.data]);}};handleHtmlResponse=function(html,status,XMLObject,handler){if(handler){handler.apply(this,[true,html]);}};$.extend($.expr[':'],{icontains:"jQuery(a).text().toUpperCase().indexOf(m[3].toUpperCase())>=0"});return{makeRequest:function(options){var formData,postData,data,handler;if(!options||!(options.module||options.url)){return false;}
if(options.form){if(typeof(options.form)==='string'){formData=$('#'+options.form).serialize();}else if($(options.form).length===1){formData=$(options.form).serialize();}else{formData=[];$.each(options.form,function(){formData.push($('#'+this).serialize());});formData=formData.join('&');}}
if(options.async===undefined){options.async=true;}
postData=options.postData?jQuery.param(options.postData):'';data=(formData?(formData+'&'):'')+postData;if(options.postQuery){data=data+'&'+options.postQuery;}
if(!$.isFunction(options.handler)){options.handler=false;}
if($.isFunction(options.postPrep)){options.postPrep();}
options.dataType=options.dataType||'json';if(options.dataType==='html'){handler=handleHtmlResponse.createDelegate(options.scope||window,options.handler,true);}else{handler=handleJsonResponse.createDelegate(options.scope||window,options.handler,true);}
return $.ajax({url:options.url,success:handler,dataType:options.dataType,async:options.async,data:data||null,type:data?'POST':'GET'});}};}(jQuery));(function($){'use strict';$.extend(Function.prototype,{createCallback:function(){var args,method;args=arguments;method=this;return function(){return method.apply(window,args);};},createDelegate:function(obj,args,appendArgs){var method,callArgs,applyArgs;method=this;return function(){callArgs=args||arguments;if(appendArgs===true){callArgs=Array.prototype.slice.call(arguments,0);callArgs=callArgs.concat(args);}else if(typeof appendArgs==="number"){callArgs=Array.prototype.slice.call(arguments,0);applyArgs=[appendArgs,0].concat(args);Array.prototype.splice.apply(callArgs,applyArgs);}
return method.apply(obj||window,callArgs);};}});$.fn.extend({replaceClass:function(oldClass,newClass){return $(this).each(function(){return $(this).removeClass(oldClass).addClass(newClass);});},toggleProp:function(prop_name){return $(this).each(function(){return $(this).prop(prop_name,function(index,value){return!value;});});},equals:function(compare_to){var i;if(!compare_to||!compare_to.length||this.length!==compare_to.length){return false;}
for(i=0;i<this.length;i+=1){if(this[i]!==compare_to[i]){return false;}}
return true;},fadeOutRemove:function(speed,callback){var $item;$item=$(this);speed=speed||500;return $item.fadeOut(speed,function(){$item.remove();if($.isFunction(callback)){callback();}});}});}(jQuery));(function($){'use strict';$(document).on('click','a[data-reveal-id]',function(e){e.preventDefault();var $trigger,id;$trigger=$(this);id=$trigger.attr('data-reveal-id');$('#'+id).reveal($trigger.data());});$(document).on('click','[data-reveal-url]',function(e){e.preventDefault();var $trigger,url;$trigger=$(this);url=$trigger.data('reveal-url');$.ajaxreveal(url,$trigger.data(),$trigger.data('partial'));});$.ajaxreveal=function(url,options,partial){var $modal;partial=(partial!==undefined&&partial!==false);$.ajax({url:url,async:false,dataType:'html',headers:{'X-Partial-Request':partial?'true':'false'},success:function(html){$modal=$(html);options=$.extend(true,{},options,{removeOnClose:true});$modal.appendTo('body');$modal.reveal(options);}});return $modal;};$.fn.reveal=function(options){var defaults;defaults={animation:'fadeAndPop',animationspeed:300,closeonbackgroundclick:true,dismissmodalclass:'close-reveal-modal',removeOnClose:false};options=$.extend({},defaults,options);return this.each(function(){var $modal,$background,topMeasure,topOffset,locked;$modal=$(this);topMeasure=parseInt($modal.css('top'),10);topOffset=$modal.height()+topMeasure;locked=false;$background=$('<div class="reveal-modal-bg" />').insertAfter($modal);function unlockModal(){locked=false;}
function lockModal(){locked=true;}
$modal.on('reveal:open',function(){$background.off('click.modalEvent');$('.'+options.dismissmodalclass).off('click.modalEvent');if(!locked){lockModal();var css;css={};if($modal.data('reveal-fixed')){css={left:'50%',top:'50%',marginLeft:-($modal.width()/2),marginTop:-($modal.height()/2)};}
if(options.animation==='fadeAndPop'){$modal.css({top:$(document).scrollTop()-topOffset,opacity:0,visibility:'visible'});$modal.addClass('on');$background.fadeIn(options.animationspeed/2);if(!$modal.data('reveal-fixed')){css.top=$(document).scrollTop()+topMeasure+'px';}
$modal.delay(options.animationspeed/2).animate($.extend(css,{opacity:1}),options.animationspeed,unlockModal);}
if(options.animation==='fade'){$modal.css({opacity:0,visibility:'visible',top:$(document).scrollTop()+topMeasure});$modal.addClass('on');$background.fadeIn(options.animationspeed/2);$modal.delay(options.animationspeed/2).animate($.extend(css,{opacity:1}),options.animationspeed,unlockModal);}
if(options.animation==='none'){$modal.css({visibility:'visible',top:$(document).scrollTop()+topMeasure});$modal.addClass('on');$background.css({'display':'block'});$modal.css(css);unlockModal();}
if($modal.data('reveal-fixed')){$modal.css('position','fixed');}}
$modal.off('reveal:open');});$modal.on('reveal:close',function(){if(!locked){lockModal();if(options.animation==='fadeAndPop'){$background.delay(options.animationspeed).fadeOut(options.animationspeed);$modal.animate({'top':$(document).scrollTop()-topOffset+'px','opacity':0},options.animationspeed/2,function(){$modal.css({'top':topMeasure,'opacity':1,'visibility':'hidden'});unlockModal();});$modal.removeClass('on');}
if(options.animation==='fade'){$background.delay(options.animationspeed).fadeOut(options.animationspeed);$modal.animate({'opacity':0},options.animationspeed,function(){$modal.css({'opacity':1,'visibility':'hidden','top':topMeasure});unlockModal();});$modal.removeClass('on');}
if(options.animation==='none'){$modal.css({'visibility':'hidden','top':topMeasure});$background.css({'display':'none'});$modal.removeClass('on');}
setTimeout(function(){$background.remove();if(options.removeOnClose){$modal.remove();}},options?(options.animationspeed||300):300);}
$modal.off('reveal:close');});$modal.trigger('reveal:open');$modal.on('click.modalEvent','.'+options.dismissmodalclass,function(){$modal.trigger('reveal:close');});if(options.closeonbackgroundclick){$background.css({'cursor':'pointer'});$background.on('click.modalEvent',function(){$modal.trigger('reveal:close');});}
$('body').keyup(function(e){if(e.which===27){$modal.trigger('reveal:close');}});});};}(jQuery));
/*! Copyright (c) 2010 Brandon Aaron (http://brandonaaron.net)
 * Dual licensed under the MIT (MIT_LICENSE.txt)
 * and GPL Version 2 (GPL_LICENSE.txt) licenses.
 *
 * Version: 1.1.1
 * Requires jQuery 1.3+
 * Docs: http://docs.jquery.com/Plugins/livequery
 */
(function($){$.extend($.fn,{livequery:function(type,fn,fn2){var self=this,q;if($.isFunction(type))
fn2=fn,fn=type,type=undefined;$.each($.livequery.queries,function(i,query){if(self.selector==query.selector&&self.context==query.context&&type==query.type&&(!fn||fn.$lqguid==query.fn.$lqguid)&&(!fn2||fn2.$lqguid==query.fn2.$lqguid))
return(q=query)&&false;});q=q||new $.livequery(this.selector,this.context,type,fn,fn2);q.stopped=false;q.run();return this;},expire:function(type,fn,fn2){var self=this;if($.isFunction(type))
fn2=fn,fn=type,type=undefined;$.each($.livequery.queries,function(i,query){if(self.selector==query.selector&&self.context==query.context&&(!type||type==query.type)&&(!fn||fn.$lqguid==query.fn.$lqguid)&&(!fn2||fn2.$lqguid==query.fn2.$lqguid)&&!this.stopped)
$.livequery.stop(query.id);});return this;}});$.livequery=function(selector,context,type,fn,fn2){this.selector=selector;this.context=context;this.type=type;this.fn=fn;this.fn2=fn2;this.elements=[];this.stopped=false;this.id=$.livequery.queries.push(this)-1;fn.$lqguid=fn.$lqguid||$.livequery.guid++;if(fn2)fn2.$lqguid=fn2.$lqguid||$.livequery.guid++;return this;};$.livequery.prototype={stop:function(){var query=this;if(this.type)
this.elements.unbind(this.type,this.fn);else if(this.fn2)
this.elements.each(function(i,el){query.fn2.apply(el);});this.elements=[];this.stopped=true;},run:function(){if(this.stopped)return;var query=this;var oEls=this.elements,els=$(this.selector,this.context),nEls=els.not(oEls);this.elements=els;if(this.type){nEls.bind(this.type,this.fn);if(oEls.length>0)
$.each(oEls,function(i,el){if($.inArray(el,els)<0)
$.event.remove(el,query.type,query.fn);});}
else{nEls.each(function(){query.fn.apply(this);});if(this.fn2&&oEls.length>0)
$.each(oEls,function(i,el){if($.inArray(el,els)<0)
query.fn2.apply(el);});}}};$.extend($.livequery,{guid:0,queries:[],queue:[],running:false,timeout:null,checkQueue:function(){if($.livequery.running&&$.livequery.queue.length){var length=$.livequery.queue.length;while(length--)
$.livequery.queries[$.livequery.queue.shift()].run();}},pause:function(){$.livequery.running=false;},play:function(){$.livequery.running=true;$.livequery.run();},registerPlugin:function(){$.each(arguments,function(i,n){if(!$.fn[n])return;var old=$.fn[n];$.fn[n]=function(){var r=old.apply(this,arguments);$.livequery.run();return r;}});},run:function(id){if(id!=undefined){if($.inArray(id,$.livequery.queue)<0)
$.livequery.queue.push(id);}
else
$.each($.livequery.queries,function(id){if($.inArray(id,$.livequery.queue)<0)
$.livequery.queue.push(id);});if($.livequery.timeout)clearTimeout($.livequery.timeout);$.livequery.timeout=setTimeout($.livequery.checkQueue,20);},stop:function(id){if(id!=undefined)
$.livequery.queries[id].stop();else
$.each($.livequery.queries,function(id){$.livequery.queries[id].stop();});}});$.livequery.registerPlugin('append','prepend','after','before','wrap','attr','removeAttr','addClass','removeClass','toggleClass','empty','remove','html');$(function(){$.livequery.play();});})(jQuery);window.helper=function(){whichAnimationEvent=function(){var t;var el=document.createElement('fakeelement');var transitions={'animation':'animationend','OAnimation':'oAnimationEnd','MozAnimation':'animationend','WebkitAnimation':'webkitAnimationEnd'}
for(t in transitions){if(el.style[t]!==undefined){return transitions[t];}}};whichTransitionEvent=function(){var t;var el=document.createElement('fakeelement');var transitions={'transition':'transitionend','OTransition':'oTransitionEnd','MozTransition':'transitionend','WebkitTransition':'webkitTransitionEnd'}
for(t in transitions){if(el.style[t]!==undefined){return transitions[t];}}};stripUnits=function(value){return parseInt(value.replace(/[^-\d\.]/g,''));};getRawName=function(_string){return _string.replace(/[.#\[\]]/g,'');};return{transitionEnd:whichTransitionEvent(),animationEnd:whichAnimationEvent(),stripUnits:stripUnits,getRawName:getRawName}}();(function($){'use strict';$(function(){var email_regex=/^((([a-z]|\d|[!#\$%&'\*\+\-\/=\?\^_`{\|}~]|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])+(\.([a-z]|\d|[!#\$%&'\*\+\-\/=\?\^_`{\|}~]|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])+)*)|((\x22)((((\x20|\x09)*(\x0d\x0a))?(\x20|\x09)+)?(([\x01-\x08\x0b\x0c\x0e-\x1f\x7f]|\x21|[\x23-\x5b]|[\x5d-\x7e]|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])|(\\([\x01-\x09\x0b\x0c\x0d-\x7f]|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF]))))*(((\x20|\x09)*(\x0d\x0a))?(\x20|\x09)+)?(\x22)))@((([a-z]|\d|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])|(([a-z]|\d|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])([a-z]|\d|-|\.|_|~|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])*([a-z]|\d|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])))\.)+(([a-z]|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])|(([a-z]|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])([a-z]|\d|-|\.|_|~|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])*([a-z]|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])))$/i;$.fn.extend({appendInput:function(object){var that;that=this;if(typeof object==='object'){$.each(object,function(key,value){if(typeof value==='object'){that.appendInput(value);}else if($.isArray(value)){$.each(value,function(index,value){that.remove('input[name="'+key+'[]"]');that.append('<input type="hidden" name="'+key+'[]" value="'+value+'">');});}else{that.remove('input[name='+key+']');that.append('<input type="hidden" name="'+key+'" value="'+value+'">');}});}
return this;},plainSubmit:function(){return this.each(function(){$(this).data('ajax',false).submit().data('ajax',true);});},isValid:function(){return this.find('[invalid]').length===0;}});$(document).on('blur','form input,form select,form textarea',null,function(){$(this).trigger('validate');});$(document).on('validate','form input,form select,form textarea',null,function(ev){ev.stopPropagation();var $input=$(this),valid=true,missing=false,name;$input.removeAttr('invalid');$input.removeAttr('valid');if($input.is(':visible')){if($input.prop('required')||$input.attr('required')==='required'){if($input.is(':radio,:checkbox')){name=$input.attr('name');if($('input[name='+name+']:checked').length<1){valid=false;missing=true;}}else if($input.val()===''){valid=false;missing=true;}}
if(this.valid===false){valid=false;missing=true;}
if($input.is("[minlength]")&&$input.val().length<parseInt($input.attr('minlength'),10)){valid=false;}
if($input.is("[maxlength]")&&$input.val().length>parseInt($input.attr('maxlength'),10)){valid=false;}
if($input.attr('type')==='email'){valid=(email_regex.test($input.val()))&&valid;}}
if(valid){$input.attr('valid',true);$input.trigger('valid');}else{if(missing){$input.addClass('validation-missing');}
$input.attr('invalid',true);$input.trigger('invalid');}});$(document).on('focus','form *[invalid]',null,function(){$(this).removeClass('validation-error').removeClass('validation-missing');$(this).parent().find('.validation-message').remove();});$(document).on('click','input[type=submit],input[type=button].submit,a[data-submit]',null,function(ev){var $trigger=$(this);if($trigger.is('[data-forms-ignore]')){return;}
ev.preventDefault();ev.target.blur();if($trigger.attr('form')){$('#'+$trigger.attr('form')).trigger('submit',$trigger);}else if($trigger.is('a[data-submit]')){$($trigger.data('submit')).trigger('submit',$trigger);}else{$trigger.closest('form').trigger('submit',$trigger);}});$(document).on('validate','form',null,function(){var $form=$(this);$form.find('input,select,textarea').each(function(){$(this).trigger('validate');});});$(document).on('submit','form:not([data-standard-form])',null,function(ev,trigger){if($(this).is('*[target*=iframe-transport]')){return true;}
var $form=$(this),action=$form.attr('action'),$inputs=$form.find('input,select,textarea'),$trigger=$(trigger),validate,post_data,extra_post_data;$form.find('.message').removeClass('active').html('');$form.trigger('validate');if(!$form.isValid()){$form.find('.global.message').html('<p>Some required fields are missing</p>').addClass('active');return false;}
$form.trigger('validated',[ev]);validate=$form.data('validationHandler');if($.isFunction(validate)){if(validate()===false){return false;}}
if($form.data('ajax')===false){post_data=$form.data('post');if(post_data&&post_data!==undefined){$form.appendInput(post_data);}
$form.trigger('processed',[ev]);return true;}
if($.isFunction($form.data('form-handler'))){post_data=$form.data('post');if(post_data&&post_data!==undefined){$form.appendInput(post_data);}
return $form.data('form-handler')(ev);}
if($(this).hasClass('no-ajax')){return true;}
ev.preventDefault();extra_post_data=$form.data('post')||{};function setText($element,text){if($element.is('input')){$element.val(text);}else{$element.text(text);}}
$trigger.replaceClass('form_error form_success','form_saving');setText($trigger,$trigger.data('text-busy'));Evisua.makeRequest({url:action,form:$form,postData:extra_post_data,dataType:$form.data('datatype')||'json',postPrep:function(){if($form.data('no-disable')!==true){$trigger.prop('disabled',true);$inputs.prop('disabled',true);}
$form.trigger('submitting',[ev]);},handler:function(success,data){$trigger.prop('disabled',false);$inputs.prop('disabled',false);$form.trigger('submitted',[success,data]);if(success){if(data.newUrlname){$form.find('input[name=urlname]').val(data.newUrlname);}
$trigger.replaceClass('form_saving','form_success');setText($trigger,$trigger.data('textForm_success'));setTimeout(function(){$trigger.removeClass('form_success').val($trigger.data('textDefault'));},4000);if(data.redirect){document.location.href=data.redirect;}}else{var global_errors=[];$trigger.replaceClass('form_saving','form_error');setText($trigger,$trigger.data('textForm_error'));setTimeout(function(){$trigger.removeClass('form_error');setText($trigger,$trigger.data('textRetry')||$trigger.data('textDefault'));},4000);if(data.error){global_errors.push(data.error);}
if(data.errors){$.each(data.errors,function(key,error){if(typeof error==='object'){error=error.join('<br/>');}
if(!isNaN(key)){global_errors.push(error);}
var name_matches=['#'+key,'input[name*="'+key+'"]','textarea[name*="'+key+'"]','select[name*="'+key+'"]'];$form.find(name_matches.join(',')).each(function(){var $el,$container,$message;$el=$(this);$container=$el.closest('.form-item');$message=$container.find('.message');$el.removeAttr('valid').attr('invalid',true).trigger('invalid').addClass('validation-error');if($el.data('select')===2){$($el.select2("container")).addClass('validation-error');}
$message.html(error).addClass('active');});});}
if(global_errors.length>0){$form.find('.global.message').html('<p>'+global_errors.join('</p><p>')+'</p>').addClass('active');}}}});return false;});if($.isFunction($.fn.select2)){$('[data-select="2"]').livequery(function(){var $select=$(this),options=$.extend({placeholder:"Type to search",minimumResultsForSearch:10},$select.data());if(options.ajax){$.extend(options,{ajax:{url:options.ajax,quietMillis:300,dataType:'json',data:function(term){return{search:term,extra:$select.data('extra')};},results:function(response){return{results:response.data};}},formatResult:function(result){if(typeof result==='string'){return result;}
if(result.html){return result.html;}
if(result.id&&result.text){var html='<div>';if(result.image){html+='<img src="'+result.image+'" alt="'+result.title+'">';}
html+=result.text;html+='</div>';return html;}
return'';}});}
if(options.create){$.extend(options,{createSearchChoice:function(term,data){if($(data).filter(function(){return this.text.localeCompare(term)===0;}).length===0){return{id:term,text:term};}
return null;}});}
if($select.is('input')&&$select.val().length>0){options.initSelection=function(element,callback){var value=null,new_value=[],data=[];try{value=$.parseJSON(element.val());}catch(e){value=element.val();}
if(!value){return;}
if(typeof value==='object'){$.each(value,function(index,value){if(value.id&&value.text){data.push(value);new_value.push(value.id);}else{data.push({id:index,text:value});new_value.push(value);}});}else if(typeof value==='string'){$.each(value.split(","),function(index,value){data.push({id:value,text:value});new_value.push(value);});}
if(!options.multiple){data=data[0];}
new_value=new_value.join(',');element.val(new_value);callback(data);};}
$select.select2(options);$select.on('open',function(){$select.select2('container').removeClass('validation-error');});});}
if($.isFunction($.fn.datepicker)){$('input.evisua-datepicker').livequery(function(){var $input;$input=$(this);$input.datepicker($.extend({dateFormat:'yy-mm-dd',onClose:function(){$(this).focus().blur();}},$input.data()));});}
if($.isFunction($.fn.datetimepicker)){$('input.evisua-datetimepicker').livequery(function(){var $input;$input=$(this);$input.datetimepicker({dateFormat:'yy-mm-dd',onClose:function(){$(this).focus().blur();}},$input.data());});}});}(window.jQuery));var ScrollTrigger=function(waypoints,options){var defaults={threshold:0.9,activeClass:'in-sight'};this.settings=$.extend({},defaults,options);this.waypoints=waypoints;this.init();}
ScrollTrigger.prototype=function(){function init(){initWaypoints();initScrollSpy.call(this);}
function initWaypoints(){for(var i=0;i<this.waypoints.length;i++){var waypoint=this.waypoints[i];waypoint.$elements=$(waypoint.selector);}}
function initScrollSpy(){var prevScrollTop,scrollTop,windowHeight,waypoint,scrollCenter,self;prevScrollTop=0;self=this;checkElements.call(this);setInterval(function(){scrollTop=$(document).scrollTop();if(prevScrollTop!==scrollTop){checkElements.call(self);}
prevScrollTop=scrollTop;},100);}
function checkElements(){var scrollTop=$(document).scrollTop();var windowHeight=$(window).height();var self=this;for(var i=0;i<this.waypoints.length;i++){waypoint=this.waypoints[i];var threshold=waypoint.threshold||self.settings.threshold;scrollCenter=scrollTop+(windowHeight*threshold);waypoint.$elements.each(function(){var $element=$(this);var top=$element.offset().top;if(top<scrollCenter){if(waypoint.action&&!$element.hasClass(self.settings.activeClass)){waypoint.action($element);}
$element.addClass(self.settings.activeClass);}});}}
return{init:init}}();var Stack=function(options){var defaults={selector:'.stack',cardSelector:'.stack__list__card',frontSelector:'.stack__list__card--front',secondSelector:'.stack__list__card--second',outClass:'stack__list__card--out',prevSelector:'.stack__navigation--prev',nextSelector:'.stack__navigation--next',listSelector:'.stack__list',forwardsTiltClass:'stack__list__card--forwards-tilt',backwardsTiltClass:'stack__list__card--backwards-tilt',animationTime:500}
this.settings=$.extend(true,{},defaults,options);this.$stack=$(this.settings.selector);this.$prevButton=$(this.settings.prevSelector);this.$nextButton=$(this.settings.nextSelector);this.$cards=$(this.settings.cardSelector);this.$list=$(this.settings.listSelector);this.isTransitioning=false;this.currentIndex=0;this.numCards=this.$cards.length;this.init();}
Stack.prototype=function(){function init(){var self=this;$(this.$prevButton).on('click',function(){prev.call(self);});$(this.$nextButton).on('click',function(){next.call(self);});var height=$(this.$cards.get(0)).outerHeight();$('.stack__list').height(height);$(this.settings.frontSelector).css('z-index',3);$(this.settings.secondSelector).css('z-index',2);}
function removeDot(selector){return selector.slice(1,selector.length);}
function stackUp(){var self=this;this.$cards.each(function(){$card=$(this);setTimeout(function(){$card.removeClass(self.settings.outClass);},100);});}
function prev(){var self=this;if(!this.isTransitioning&&this.currentIndex>0){this.isTransitioning=true;var $curr=$(this.settings.frontSelector);var $next=$curr.next();var numCards=this.numCards;var $prev=$curr.prev();var $list=this.$list;var newHeight=$prev.outerHeight();$list.height(newHeight);$prev.removeClass(this.settings.outClass).addClass(removeDot(this.settings.frontSelector)).css('z-index',3);$curr.removeClass(removeDot(this.settings.frontSelector)).addClass(removeDot(this.settings.secondSelector)).css('z-index',2);$next.css('z-index',1).removeClass(removeDot(this.settings.secondSelector));setTimeout(function(){self.isTransitioning=false;self.currentIndex--;},self.settings.animationTime);}else{$(this.settings.frontSelector).addClass(self.settings.backwardsTiltClass).one(window.helper.animationEnd,function(){$(this).removeClass(self.settings.backwardsTiltClass);});}}
function next(){var self=this;if(!this.isTransitioning&&this.currentIndex<this.numCards-1){this.isTransitioning=true;this.currentIndex++;var $front=$(this.settings.frontSelector);var $second=$front.next();var $third=$second.next();var $list=this.$list;var newHeight=$second.outerHeight();$front.addClass(this.settings.outClass);$list.height(newHeight);$second.removeClass(removeDot(this.settings.secondSelector)).addClass(removeDot(this.settings.frontSelector));$third.addClass(removeDot(this.settings.secondSelector)).css('z-index',1);setTimeout(function(){$front.removeClass(removeDot(self.settings.frontSelector)).removeAttr('style');self.$cards.removeAttr('css');$second.css('z-index',3);$third.css('z-index',2);self.isTransitioning=false;},self.settings.animationTime);}else{$(this.settings.frontSelector).addClass(self.settings.forwardsTiltClass).one(window.helper.animationEnd,function(){$(this).removeClass(self.settings.forwardsTiltClass);});}}
return{init:init,stackUp:stackUp}}();function Accordeon(options){var defaults={accordeonSelector:'.accordeon',elementSelector:'.accordeon__element',elementClass:'accordeon__element',titleSelector:'.accordeon__element__inner__question',contentSelector:'.accordeon__element__inner__answer'}
this.settings=$.extend({},defaults,options);this.$elements=$(this.settings.accordeonSelector+" "+this.settings.elementSelector);this.init();}
Accordeon.prototype=function(){function init(){var self=this;this.$elements.each(function(){resize.call(self,$(this));});$(window).resize(function(){self.$elements.each(function(){resize.call(self,$(this));});})
$('.accordeon').on('click',self.settings.elementSelector,function(e){var $element=$(this);var elementHeight=$element.height();var contentHeight=$element.find(self.settings.contentSelector).height();var titleHeight=$element.find(self.settings.titleSelector).height();var activeClass=self.settings.elementClass+'--active';$element.siblings("."+activeClass).removeClass(activeClass).height(function(){var elementHeight=$(this).height();var contentHeight=$(this).find(self.settings.contentSelector).height();return elementHeight-(contentHeight-27);});if($element.hasClass(activeClass)){$element.removeClass(activeClass).height(elementHeight-(contentHeight-27));}else{$element.addClass(activeClass).height(elementHeight+(contentHeight-27));}
clickCircle(e);});}
function resize($element,opening){var titleHeight=$element.find(this.settings.titleSelector).height();var elementPadding=helper.stripUnits($element.css('padding-top'))+helper.stripUnits($element.css('padding-bottom'));$element.outerHeight(titleHeight+elementPadding);}
function clickCircle(event){var offsetX=event.offsetX;var offsetY=event.offsetY;var $target=$(event.target);var targetTop=$target.offset().top;var targetLeft=$target.offset().left;var $currTarget=$(event.currentTarget);var currentTargetTop=$currTarget.offset().top;var currentTargetLeft=$currTarget.offset().left;var sizeBig=2000;var x=targetLeft-currentTargetLeft+offsetX;var y=targetTop-currentTargetTop+offsetY;var $clickCircleBig=$('<span class="click-circle-big"></span>').prependTo($currTarget).css({"left":x-sizeBig/2,"top":y-sizeBig/2,"height":sizeBig,"width":sizeBig});helper.animationEnd&&$clickCircleBig.one(helper.animationEnd,function(e){$clickCircleBig.remove();});}
return{init:init}}();function Modal(options){var defaults={modalSelector:'.modal',modalIdentifier:'modal'};this.settings=$.extend({},defaults,options);this.$modal=$(this.settings.modalSelector);this.$trigger=$('[data-reveal-id="'+this.settings.modalIdentifier+'"]');this.init();}
Modal.prototype=function(){function init(){var self=this;self.$trigger.on('click',function(){$('body').addClass('active-modal');self.$modal.addClass('modal--active');setTimeout(function(){self.$modal.find('input').first().focus();},100);});self.$modal.on('click',function(e){if($(e.target).hasClass('modal__inner')){$(this).removeClass('modal--active');$('body').removeClass('active-modal');}});$(document).keyup(function(e){if(e.keyCode==27){$('body').removeClass('active-modal');$(self.$modal).removeClass('modal--active').removeAttr('style');}});}
return{init:init}}();(function($){'use strict';$(function(){$(document).on('click','a[data-modal-trigger]',function(ev){ev.preventDefault();$.ajax({url:$(this).attr('href'),async:false,dataType:'html',success:function(html){var $modal=$(html);$modal.appendTo('body');$modal.find('.modal__inner').on('click',function(ev){if($(ev.target).is('.modal__inner')){$modal.remove();}});$(document).one('keyup.modal',function(ev){if(ev.keyCode==27){$modal.remove();}});}});return false;});$(document).on('click','[data-modal-close]',function(ev){ev.preventDefault();$(this).closest('.modal,.download-modal').remove();return false;});var $flashes=$('.modal.flash');if($flashes.length>0){setTimeout(function(){$flashes.addClass('modal--active');},1000);}});}(jQuery));var waypoints=[{selector:".how .tri"},{selector:".features-grid__row__element",threshold:0.5,action:function($el){var $illustrations=$el.find('.features-grid__row__element__illustration');$el.addClass('in-sight');$illustrations.each(function(){var $illustration=$(this);var oldSrc=$illustration.attr('src');var newSrc=oldSrc.replace('png','gif');var delay=$illustration.data('delay')||0;setTimeout(function(){$illustration.attr('src',newSrc);},delay);});}},{selector:".awesome",threshold:0.4},{selector:".bounce-once",threshold:0.5},{selector:".bounce",threshold:0.5},{selector:".stack",threshold:0.7,action:function($el){$($("li").get().reverse());var $cards=$($el.find('.stack__list__card').get().reverse());$cards.each(function(i){setTimeout(function(){$($cards.get(i)).removeClass('stack__list__card--out');},i*70);});}},{selector:'.accordeon',threshold:0.9}];(function($){'use strict';$(function(){$.fn.contentToggle=function(){return this.each(function(){var targetSelector=$(this).data('toggle-target');var $target=$('[data-toggle='+targetSelector+']');$target.css('display','none');$(this).on('click',function(){$target.slideToggle(function(){$(this).css('overflow','visible');});});});};$.fn.backgroundScroll=function(options){var defaults={startY:40,endY:60};var settings=$.extend({},defaults,options);return this.each(function(){var $this=$(this);var top=$this.offset().top;$this.css('background-position','center '+40+'%');setInterval(function(){var scrollTop=$(document).scrollTop();var inViewY=top-scrollTop;if(scrollTop<top){updateBgPosition(inViewY);}},80);function updateBgPosition(inViewY){var windowHeight=$(window).height();var span=settings.endY-settings.startY;var backgroundOffset=(1-inViewY/windowHeight)*span+settings.startY;$this.css('background-position','center '+backgroundOffset+"%");}});};new Stack();new Accordeon();new Modal({modalIdentifier:'modal-login'});new ScrollTrigger(waypoints);$('.header__pull').on('click',function(){$('.page-wrapper-inner').toggleClass('offcanvas-active');});$(window).resize(function(){if($(window).width()>768){$('.page-wrapper-inner').removeClass('offcanvas-active');}});$('.features-grid__row__element__illustration').on('mouseenter',function(){var $illustration=$(this);var gifSrc=$illustration.attr('src');var pngSrc=gifSrc.replace('gif','png');$illustration.attr('src',pngSrc);setTimeout(function(){$illustration.attr('src',gifSrc);},4);});$('.content-toggle').contentToggle();$('a[data-scroll-to]').on('click',function(e){e.preventDefault();var $target=$($(this).attr('href'));var scrollTop=$target.offset().top;$("html, body").animate({scrollTop:scrollTop},600);});$('[data-delete-logo]').on('click',function(e){e.preventDefault();var url=$(this).attr('href'),$parent=$(this).closest('.my-logos-grid__tile');$.get(url,function(html){var $modal=$(html);$('body').append($modal);$modal.addClass('delete-logo-modal--active');function removeModal(){$modal.removeClass('delete-logo-modal--active');setTimeout(function(){$modal.remove();},600);}
$modal.on('click','[data-delete-cancel]',removeModal);$modal.on('click','[data-delete-confirm]',function(ev){ev.preventDefault();var $trigger=$(this);$.get($trigger.attr('href'),function(response){if(response.success){$parent.fadeOut('fast',function(){$parent.remove();});}
removeModal();});});});});$('[data-delete-account]').on('click',function(e){e.preventDefault();$('.delete-confirmation').show();$(this).hide();});$('[data-delete-account-final]').on('click',function(e){e.preventDefault();var self=$(this);self.text("See you again!");$.post($(this).attr('href')).done(function(response){if(response.success){window.location='/';}else{self.text("Something went wrong :( Please try again.")}});});$('#contact-form').on('submit',function(ev){var $form=$(this);$form.find('input[type="submit"]').prop('disabled',true);}).on('submitted',function(ev,success,data){var $form=$(this);$form.find('input[type="submit"]').prop('disabled',false);if(success){$('#contact-form-form').removeClass('visible');$('#contact-form-success').addClass('visible');}});$('.img-embed__trigger').on('click',function(ev){ev.preventDefault();var $trigger=$(this);$.get($trigger.attr('href'),function(modal){var $modal=$(modal);var $body=$('body');$modal.appendTo('body').addClass('modal--active');$body.addClass('active-modal');$modal.on('focus','textarea',function(e){$(this).select();});$modal.on('click','.modal__inner',function(e){if($(e.target).hasClass('modal__inner')){$modal.removeClass('modal--active');$body.removeClass('active-modal');setTimeout(function(){$modal.remove();},1000);}});});});$('.print-trigger[href]').on('click',function(ev){ev.preventDefault();var $trigger=$(this);var $iframe=$('<iframe />');$iframe.attr('src',$trigger.attr('href')).css({visibility:'hidden',position:'fixed',right:0,bottom:0}).on('load',function(){function closePrint(){$iframe.remove();}
var win=this.contentWindow;win.onbeforeunload=closePrint;win.onafterprint=closePrint;win.focus();win.print();});$iframe.appendTo('body');});});}(jQuery));
